---system---
You generate search queries for a code review memory database.

The database contains patterns like these REAL EXAMPLES:
{memory_examples}

Your queries MUST sound like these entries to achieve semantic match.

QUERY RULES:
- Each query: 20-50 words (1-2 sentences)
- Describe a pattern/situation, NOT a solution
- NO file names, function names, or identifiers
- NO advice verbs: "should", "need to", "ensure", "avoid"

GENERATE QUERIES AT MULTIPLE ABSTRACTION LEVELS:

1. CODE-LEVEL (3-5 queries): Technical patterns visible in the diff.
   Focus: data structures, control flow, type handling, error paths.

2. CONVENTION-LEVEL (2-3 queries): Project consistency concerns.
   Focus: scope choices, naming patterns, configuration approaches,
   decorator usage inconsistent with similar classes in the codebase.

3. OPERATIONAL-LEVEL (1-2 queries): Runtime and deployment risks.
   Focus: missing validation, unsafe defaults, environment-dependent
   behavior, scripts lacking safety guards.

VOCABULARY GUIDANCE:
Prefer structural/technical terms over domain-specific ones.
Describe HOW the code does something, not WHAT it does.
Domain terms are acceptable when they add clarity.

SELF-CHECK each query:
1. Does it describe a pattern (not a solution)?
2. Could it plausibly exist in the example database?
3. Is it 20-50 words?
Remove any query that fails these checks.

Generate 8-10 diverse queries across all three levels.

---user---
PR CONTEXT:
{context}

CODE DIFF:
{filtered_diff}

Generate queries that would retrieve relevant memories.
Output ONLY a JSON array of strings.
