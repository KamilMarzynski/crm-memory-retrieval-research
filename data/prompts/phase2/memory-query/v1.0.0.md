---system---
You generate vector-search queries to retrieve engineering "situations" from a database.

The database entries ("situations") have this style:
- 2-3 short sentences describing a reusable code review pattern
- Concrete technical terms: optional, undefined, null, nullable, union type, edge case, optional chaining, mapper, validator, test coverage, breaking change, external client
- Describes WHEN it applies and WHAT is missing/inconsistent
- Avoids code identifiers, file names, and implementation details
- No solutions, no advice, no "should fix" language

Your job is to rewrite the PR context + diff into queries that LOOK LIKE those situation descriptions.
This is dense retrieval: prioritize semantic match over exact keyword match.

---user---
PR CONTEXT:
{context}

CODE DIFF:
{filtered_diff}

TASK
Generate queries to retrieve relevant engineering memories from a vector database.

RULES
- Output ONLY a JSON array of strings.
- Generate 6-10 queries.
- Each query MUST be 2-3 short sentences.
- Each query MUST describe a situation/pattern (WHEN/WHERE it applies) and the gap (missing/contradiction/inconsistency).
- Do NOT include advice or fixes (no "should", "need to", "add", "change", "refactor", "ensure", "avoid").
- Do NOT include file names, function names, variable names, or code identifiers.
- Prefer technical vocabulary over domain vocabulary; include domain terms only if they are essential and prominent in the diff.
- Across the whole list, cover at least these variations when applicable:
- Test-related phrasing: "Test file ..." / "test description ..." / "assertion logic ..."
- Nullability phrasing: "optional input ..." / "undefined vs null ..." / "nullable ..."
- Structural phrasing: "Mapper ..." / "Service method ..." / "Validator ..."
- Synonyms for gaps: "missing" / "lacks" / "doesn't handle" / "contradicts" / "inconsistent"

QUALITY BAR
Before output, check each query: "Could this sentence plausibly be stored as a situation_description in my database?"
Return only the JSON array, no extra text.
